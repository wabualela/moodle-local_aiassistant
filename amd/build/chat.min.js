/**
 * AI Assistant Chat Interface
 *
 * @module     local_aiassistant/chat
 * @copyright  2025 Wail Abualela
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_aiassistant/chat",["jquery"],(function($){class Chat{constructor(){this.fab=null,this.chatBox=null,this.messagesContainer=null,this.input=null,this.sendButton=null,this.closeButton=null,this.optionsButton=null,this.isOpen=!1}init(){this.fab=document.getElementById("local-aiassistant-fab"),this.chatBox=document.getElementById("local-aiassistant-chat"),this.fab&&this.chatBox?(this.messagesContainer=this.chatBox.querySelector("#local-aiassistant-messages"),this.input=this.chatBox.querySelector("#local-aiassistant-input"),this.sendButton=this.chatBox.querySelector("#local-aiassistant-send"),this.closeButton=this.chatBox.querySelector(".local-aiassistant-chat-close"),this.optionsButton=this.chatBox.querySelector(".local-aiassistant-chat-options"),this.bindEvents(),window.console.log("AI Assistant Chat initialized")):window.console.warn("AI Assistant: Required elements not found")}bindEvents(){this.fab.addEventListener("click",(()=>this.toggleChat())),this.fab.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleChat())})),this.closeButton&&this.closeButton.addEventListener("click",(()=>this.closeChat())),this.optionsButton&&this.optionsButton.addEventListener("click",(()=>this.openSettings())),this.sendButton&&this.sendButton.addEventListener("click",(()=>this.sendMessage())),this.input&&this.input.addEventListener("keypress",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())})),document.addEventListener("click",(e=>{!this.isOpen||this.chatBox.contains(e.target)||this.fab.contains(e.target)||this.closeChat()})),this.chatBox.addEventListener("click",(e=>{e.stopPropagation()}))}toggleChat(){this.isOpen?this.closeChat():this.openChat()}openChat(){this.chatBox.classList.add("is-visible"),this.fab.classList.add("is-hidden"),this.isOpen=!0,this.fab.setAttribute("aria-expanded","true"),this.input&&setTimeout((()=>this.input.focus()),100)}closeChat(){this.chatBox.classList.remove("is-visible"),this.fab.classList.remove("is-hidden"),this.isOpen=!1,this.fab.setAttribute("aria-expanded","false")}openSettings(){const settingsUrl=this.chatBox.getAttribute("data-settingsurl");settingsUrl&&(window.location.href=settingsUrl)}sendMessage(){const message=this.input.value.trim();""!==message&&(this.addMessage(message,"user"),this.input.value="",this.showTypingIndicator(),setTimeout((()=>{this.hideTypingIndicator(),this.addMessage("This is a simulated response. Web service integration coming soon!","ai")}),1e3))}addMessage(text,sender){const messageDiv=document.createElement("div");messageDiv.className="local-aiassistant-message local-aiassistant-message-".concat(sender);const contentDiv=document.createElement("div");contentDiv.className="local-aiassistant-message-content",contentDiv.textContent=text;const timeDiv=document.createElement("div");timeDiv.className="local-aiassistant-message-time",timeDiv.textContent=this.getCurrentTime(),messageDiv.appendChild(contentDiv),messageDiv.appendChild(timeDiv),this.messagesContainer.appendChild(messageDiv),this.scrollToBottom()}showTypingIndicator(){const indicator=document.createElement("div");indicator.className="local-aiassistant-typing-indicator",indicator.id="local-aiassistant-typing",indicator.innerHTML="<span></span><span></span><span></span>",this.messagesContainer.appendChild(indicator),this.scrollToBottom()}hideTypingIndicator(){const indicator=document.getElementById("local-aiassistant-typing");indicator&&indicator.remove()}scrollToBottom(){this.messagesContainer.scrollTop=this.messagesContainer.scrollHeight}getCurrentTime(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}return{init:function(){$(document).ready((function(){(new Chat).init()}))}}}));

//# sourceMappingURL=chat.min.js.map